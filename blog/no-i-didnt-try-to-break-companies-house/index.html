<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-gb">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>No, I didn&#39;t try to break Companies House | Sam Pizzey</title>

<meta property='og:title' content='No, I didn&#39;t try to break Companies House - Sam Pizzey'>
<meta property='og:description' content='I have a tendency to take a joke too far.
The most recent example of this would be yesterday in IRC, where I was discussing with a few friends what I should name my new company. Being a business to business consultancy, and mostly a one-man operation, the name isn’t that important, but I wanted something with a bit of personality. And I asked:
&lt;Mopman&gt; Is there anything stopping me from registering ; DROP TABLE &quot;Companies&quot;;-- Ltd as a company name?'>
<meta property='og:url' content='https://pizzey.me/blog/no-i-didnt-try-to-break-companies-house/'>
<meta property='og:site_name' content='Sam Pizzey'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/4fcca0f870c6fd5c6647fe68f4b0f32c?s=256'><meta property='article:section' content='Blog'><meta property='article:published_time' content='2016-12-30T17:00:19&#43;01:00'/><meta property='article:modified_time' content='2016-12-30T17:00:19&#43;01:00'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@mopman'><meta name='twitter:creator' content='@mopman'>
<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='https://pizzey.me/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>


<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://pizzey.me"><h1 class="title is-4">Sam Pizzey</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" aria-label="email" href='mailto:sam@pizzey.me' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/pizzeys' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/pizzeys' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/mopman' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>

<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
    </div>
    <h2 class="subtitle is-6">December 30, 2016</h2>
    <h1 class="title">No, I didn&#39;t try to break Companies House</h1>
    
    <div class="content">
      <p>I have a tendency to take a joke too far.</p>

<p>The most recent example of this would be yesterday in IRC, where I was discussing with a few friends what I should name my new company. Being a business to business consultancy, and mostly a one-man operation, the name isn’t that important, but I wanted something with a bit of personality. And I asked:</p>

<pre><code>&lt;Mopman&gt; Is there anything stopping me from registering ; DROP TABLE
&quot;Companies&quot;;-- Ltd as a company name?
</code></pre>

<p>We weren’t sure of the answer. So I gave it a go. Turns out, the answer is yes you can, that is a perfectly legitimate company name. Also turns out, if you do that, you’ll attract the attention of people around the world, even if you don’t tell anyone other than a few close friends about your new venture.</p>

<p>I’m really happy that many people seem to like my company name! I like it too, even more now than I did when I registered it. And if you need any application security work done, give me a shout - especially if you’re a non-profit, because I like you guys.</p>

<p>But I need to clear something up: <em>I did not attempt to break Companies House</em>!</p>

<p>The company name is a bit of hacker sleight-of-hand… or as some astute people have put it, it’s ‘wrong’. Of course it’s wrong - I’m not a /total/ arsehole. :)</p>

<p>For those not intimately familiar with SQL injection, it occurs when user input is concatenated with an SQL query insecurely and an attacker is able to modify the query to do things it wasn’t supposed to do. But my input doesn’t do that. It just looks (on the surface) like it might.</p>

<p>The example many are comparing it to is the infamous Bobby Tables from XKCD. The input used in Bobby Tables is:</p>

<pre><code>Robert'); DROP TABLE Students;--
</code></pre>

<p>The SQL query that goes along with this on the server would be something like:</p>

<pre><code>SELECT * FROM Students WHERE (Name = '&lt;user input goes here&gt;');
</code></pre>

<p>So by entering the comic’s input, you get:</p>

<pre><code>SELECT * FROM Students WHERE (Name = 'Robert'); DROP TABLE STUDENTS;--';
</code></pre>

<p>The ‘); after Robert closes the preceding part of the query, and then the attacker inserts their own query. The – at the end is a comment, and makes SQL ignore everything after this point.</p>

<p>However, my company contains nothing to close the preceding part of the query. If you insert my company name here, you get:</p>

<pre><code>SELECT * FROM Students WHERE NAME = '; DROP TABLE &quot;Companies&quot;;-- Ltd';
</code></pre>

<p>The whole ‘invalid’ input is actually valid input, inside the string as expected - it just looks like SQL. This is not going to cause a problem. Even with bad code. Everything in red above is just treated like a normal text string.</p>

<p>In addition, as many have pointed out, most SQL engines don’t accept double quotes around table names - so even IF this was treated as a query (which it will not be), it would likely fail to drop anyway. Call that ‘defense in depth’ if you like.</p>

<p>TLDR: It’s pretend. Just a joke! But a funny one, apparently. :)</p>

<p>EDIT:</p>

<p>Yes, this is a simplified example, and there are many many ways this string could be concatenated in various codebases. However, there is none, outside really whacky examples which would be breaking on many other company names already, where it causes a major issue.</p>

      
      <div class="related">
</div>
      
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://twitter.com/mopman">Sam Pizzey</a> 2018</p>
    
  </div>
</section>

</body>
</html>

